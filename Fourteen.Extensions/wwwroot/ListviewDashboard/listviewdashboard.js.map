{"version":3,"file":"listviewdashboard.js","sources":["../../ListviewDashboard/src/listview-dashboard.ts"],"sourcesContent":["import { LitElement, css, html, customElement, state, when} from \"@umbraco-cms/backoffice/external/lit\";\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\nimport type { UmbTableColumn, UmbTableConfig, UmbTableElement, UmbTableItem, UmbTableOrderedEvent } from '@umbraco-cms/backoffice/components';\nimport { UMB_COLLECTION_CONTEXT, UmbDefaultCollectionContext } from \"@umbraco-cms/backoffice/collection\";\n\n@customElement('listview-dashboard')\nexport class ListviewDashboardElement extends UmbElementMixin(LitElement) {\n  @state()\n  private _tableConfig: UmbTableConfig = {\n    allowSelection: true,\n    hideIcon : false\n  };\n\n  @state()\n\tprivate _tableColumns: Array<UmbTableColumn> = [\n\t\t{\n\t\t\tname: 'Name',\n\t\t\talias: 'name',\n      allowSorting: true\n\t\t},\n    {\n\t\t\tname: 'Description',\n\t\t\talias: 'description',\n      allowSorting: true\n\t\t},\n\t\t{\n\t\t\tname: 'Author',\n\t\t\talias: 'author',\n\t\t}\t\t\n\t];\n \n  @state()\n\tprivate _tableItems: Array<UmbTableItem> = [\n    {\n      id: \"1\",\n      icon: \"icon-document\",\n      entityType: \"my-listview-item\",\n      data: [\n        {\n          columnAlias: \"name\",\n          value: \"My node 1\"\n        },\n        {\n          columnAlias: \"author\",\n          value: \"Author 1\"\n        },\n        {\n          columnAlias: \"description\",\n          value: \"A short description of my node\"\n        }\n      ]\n    },\n    {\n      id: \"2\",\n      icon: \"icon-document\",\n      entityType: \"my-listview-item\",\n      data: [\n        {\n          columnAlias: \"name\",\n          value: \"Ny node 2\"\n        },\n        {\n          columnAlias: \"author\",\n          value: \"Author 2\"\n        },\n        {\n          columnAlias: \"description\",\n          value: \"B short description of my node\"\n        }\n      ]\n    }\n  ];\n\n  #collectionContext?: UmbDefaultCollectionContext;\n\n  #ordering(event: UmbTableOrderedEvent) {\n\n    this._tableItems.reverse();\n\n    // TODO: Get sorting working correctly based on properties\n\n    // var table = event.target as UmbTableElement;\n    // console.log(table);\n    // console.log(table.orderingColumn)\n    // console.log(table.orderingDesc)\n    // this._tableItems.sort((a, b) => {\n    //   var name_A = a.data.find(obj => obj.columnAlias == table.orderingColumn) || \"\";\n    //   var name_B = b.data.find(obj => obj.columnAlias == table.orderingColumn) || \"\";\n\n    //   if (name_A < name_B) {\n    //     return -1;\n    //   }\n    //   if (name_A > name_B) {\n    //     return 1;\n    //   }\n    //   return 0;\n    // })\n\n    // if(table.orderingDesc){\n    //   console.log(this._tableItems);\n    //   this._tableItems.reverse();\n    //   console.log(this._tableItems);\n    // }\n\t};\n\n  constructor() {\n\t\tsuper();\n\n    this.consumeContext(UMB_COLLECTION_CONTEXT, (instance) => {\n      this.#collectionContext = instance;\n\n      this.observe(\n        this.#collectionContext.items,\n        (items) => {\n          console.log(items)\n          this._tableItems = items;\n        },\n        'umbCollectionItemsObserver'\n      )\n    })\n\t}\n\n  render() {\n    return when(\n      this._tableItems.length,\n      () => html`\n      <uui-box>\n        <umb-table\n          .config=${this._tableConfig}\n          .columns=${this._tableColumns}\n          .items=${this._tableItems}\n          @ordered=${this.#ordering}\n        ></umb-table>\n        </uui-box>\n      `,\n      () => html`<div class=\"flex\">\n        ${this.localize.term(\"content_noItemsToShow\")}\n      </div>`\n    );\n  }\n\n  static styles = [\n    css`\n      :host {\n        display: flex;\n        flex-direction: column;\n      }\n\n      .flex {\n        display: flex;\n        justify-content: center;\n      }\n    `,\n  ];\n}\n\nexport default ListviewDashboardElement;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'listview-dashboard': ListviewDashboardElement;\n  }\n}"],"names":["_collectionContext","_ListviewDashboardElement_instances","ordering_fn","ListviewDashboardElement","UmbElementMixin","LitElement","__privateAdd","UMB_COLLECTION_CONTEXT","instance","__privateSet","__privateGet","items","when","html","__privateMethod","event","css","__decorateClass","state","customElement","ListviewDashboardElement$1"],"mappings":";;;;;;;;;wYAAAA,GAAAC,GAAAC;AAMO,IAAMC,IAAN,cAAuCC,EAAgBC,CAAU,EAAE;AAAA,EAmGxE,cAAc;AACR,aApGDC,EAAA,MAAAL,CAAA,GAEL,KAAQ,eAA+B;AAAA,MACrC,gBAAgB;AAAA,MAChB,UAAW;AAAA,IAAA,GAId,KAAQ,gBAAuC;AAAA,MAC9C;AAAA,QACC,MAAM;AAAA,QACN,OAAO;AAAA,QACJ,cAAc;AAAA,MAClB;AAAA,MACE;AAAA,QACD,MAAM;AAAA,QACN,OAAO;AAAA,QACJ,cAAc;AAAA,MAClB;AAAA,MACA;AAAA,QACC,MAAM;AAAA,QACN,OAAO;AAAA,MACR;AAAA,IAAA,GAID,KAAQ,cAAmC;AAAA,MACxC;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,MAAM;AAAA,UACJ;AAAA,YACE,aAAa;AAAA,YACb,OAAO;AAAA,UACT;AAAA,UACA;AAAA,YACE,aAAa;AAAA,YACb,OAAO;AAAA,UACT;AAAA,UACA;AAAA,YACE,aAAa;AAAA,YACb,OAAO;AAAA,UACT;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,MAAM;AAAA,UACJ;AAAA,YACE,aAAa;AAAA,YACb,OAAO;AAAA,UACT;AAAA,UACA;AAAA,YACE,aAAa;AAAA,YACb,OAAO;AAAA,UACT;AAAA,UACA;AAAA,YACE,aAAa;AAAA,YACb,OAAO;AAAA,UACT;AAAA,QACF;AAAA,MACF;AAAA,IAAA,GAGFK,EAAA,MAAAN,CAAA,GAmCO,KAAA,eAAeO,GAAwB,CAACC,MAAa;AACxD,MAAAC,EAAA,MAAKT,GAAqBQ,CAAA,GAErB,KAAA;AAAA,QACHE,QAAKV,CAAmB,EAAA;AAAA,QACxB,CAACW,MAAU;AACT,kBAAQ,IAAIA,CAAK,GACjB,KAAK,cAAcA;AAAA,QACrB;AAAA,QACA;AAAA,MAAA;AAAA,IACF,CACD;AAAA,EACJ;AAAA,EAEC,SAAS;AACA,WAAAC;AAAA,MACL,KAAK,YAAY;AAAA,MACjB,MAAMC;AAAA;AAAA;AAAA,oBAGQ,KAAK,YAAY;AAAA,qBAChB,KAAK,aAAa;AAAA,mBACpB,KAAK,WAAW;AAAA,qBACdC,QAAKb,GAASC,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA,MAI7B,MAAMW;AAAA,UACF,KAAK,SAAS,KAAK,uBAAuB,CAAC;AAAA;AAAA,IAAA;AAAA,EAGnD;AAeF;AAjFEb,IAAA,oBAAA,QAAA;AAnEKC,IAAA,oBAAA,QAAA;AAqELC,IAAS,SAACa,GAA6B;AAErC,OAAK,YAAY;AA0BpB;AAjGYZ,EAuIJ,SAAS;AAAA,EACda;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWF;AAjJQC,EAAA;AAAA,EADPC,EAAM;AAAA,GADIf,EAEH,WAAA,gBAAA,CAAA;AAMDc,EAAA;AAAA,EADNC,EAAM;AAAA,GAPIf,EAQJ,WAAA,iBAAA,CAAA;AAkBAc,EAAA;AAAA,EADNC,EAAM;AAAA,GAzBIf,EA0BJ,WAAA,eAAA,CAAA;AA1BIA,IAANc,EAAA;AAAA,EADNE,EAAc,oBAAoB;AAAA,GACtBhB,CAAA;AAsJb,MAAAiB,IAAejB;"}